import{r as h,S as re,a9 as m,v as T,j as n,d as ne,a as e,T as o,F as D,B as f,C as O,b as p,aB as te,aC as se,x as M,y as B,z as k,A,a8 as P,D as F}from"./index-67d0cd9a.js";import{F as le}from"./index.esm-1aecf43c.js";import{T as I,a as _,b as ie,c,d as u,e as j,f as t}from"./chunk-Z3IFIKNA-d50cfd80.js";import{T as oe}from"./chunk-V3BNVYZO-04c3308d.js";import{T as ce}from"./chunk-OMHV467B-e9b4e8e7.js";import{I as ae}from"./chunk-E77276RR-4bbe9ba5.js";import{S as de}from"./chunk-GJO77I2I-69a57a56.js";import{M as H}from"./chunk-YI7XFFAC-32ff57df.js";import"./chunk-QBIO4VEB-a4073386.js";function Ee(){const[$,E]=h.useState(""),[g,y]=h.useState([]),x=re();h.useEffect(()=>{(async()=>{try{const r=await m.get("/user/all"),{data:s,message:i}=r;i&&E(i),s&&y(s)}catch(r){console.log("erro fetch list user",r)}})()},[]);async function U(){try{const r=await m.get("/user/all"),{data:s,message:i}=r;i&&E(i),s&&y(s)}catch(r){console.log("erro fetch list user",r)}}const[a,q]=h.useState({}),[L,N]=h.useState(""),z=r=>{const i=r.target.parentElement.parentElement.parentElement.querySelector(".id").textContent;(async()=>{try{const l=await m.get(`/user/${i}`),{message:d,data:b}=l;d&&N(d),b&&q(b)}catch(l){console.log("error find one user",l)}})()},{isOpen:G,onClose:w,onOpen:W}=T(),[v,S]=h.useState({}),R=r=>{W();const s=r.target.parentElement.parentElement.parentElement;console.log(s);const i=s.querySelector(".id").textContent;(async()=>{try{const l=await m.get(`/user/${i}`),{data:d}=l;d&&S(d)}catch(l){console.log("error find one user",l)}})()},V=r=>{S(s=>({...s,role:r.target.value}))},Y=()=>{(async()=>{try{(await m.put(`/user/${v._id}`,v)).status===200&&(console.log("okee"),x({title:"Update successful",description:"Thay đổi thành công.",status:"success",duration:9e3,isClosable:!0,position:"top"}),U())}catch(r){console.log("edit user failed",r)}})(),w()},{isOpen:J,onClose:C,onOpen:K}=T(),[Q,X]=h.useState(""),Z=r=>{K();const i=r.target.parentElement.parentElement.parentElement.querySelector(".id").textContent;(async()=>{try{const l=await m.get(`/user/${i}`),{_id:d}=l.data;l.data&&X(d)}catch(l){console.log("error find one user",l)}})()};async function ee(){try{const r=await m.delete(`/user/${Q}`),{message:s}=r.data;s&&x({title:"Successful",description:s,status:"success",duration:9e3,isClosable:!0,position:"top"}),U(),setTimeout(()=>{C()},1e3)}catch(r){console.log("error to delete user",r)}}return n(ne,{pos:"absolute",top:"7rem",paddingInline:"5rem",paddingBlock:"2rem",maxW:"full",children:[e(o,{children:"List Users"}),n(D,{gap:"4rem",children:[e(f,{flex:"1",children:e(I,{mt:"2rem",children:n(_,{variant:"striped",colorScheme:"teal",children:[n(oe,{children:["Total is ",g.length]}),e(ie,{children:n(c,{children:[e(u,{children:"No."}),e(u,{children:"ID."}),e(u,{children:"Username"}),e(u,{children:"Email"}),e(u,{children:"Role"}),e(u,{})]})}),e(j,{children:g.length<1?e(O,{children:e(o,{children:$})}):g.map((r,s)=>n(c,{children:[e(t,{children:s+1}),e(t,{w:"5rem",textOverflow:"ellipsis",overflow:"hidden",className:"id",children:e(o,{w:"inherit",textOverflow:"ellipsis",overflow:"hidden",children:e(ce,{label:r._id,children:r._id})})}),e(t,{w:"10rem",textOverflow:"ellipsis",overflow:"hidden",children:e(o,{w:"inherit",textOverflow:"ellipsis",overflow:"hidden",children:r.username})}),e(t,{w:"15rem",textOverflow:"ellipsis",overflow:"hidden",children:e(o,{w:"inherit",textOverflow:"ellipsis",overflow:"hidden",children:r.email})}),e(t,{children:r.role}),e(t,{children:n(D,{gap:"1rem",children:[n(p,{colorScheme:"blue",onClick:z,children:[e(te,{style:{pointerEvents:"none"}}),e(o,{ml:"0.5rem",pointerEvents:"none",children:"Preview"})]}),n(p,{colorScheme:"green",onClick:R,children:[e(le,{style:{pointerEvents:"none"}}),e(o,{ml:"0.5rem",pointerEvents:"none",children:"Edit"})]}),n(p,{colorScheme:"red",onClick:Z,children:[e(se,{style:{pointerEvents:"none"}}),e(o,{ml:"0.5rem",pointerEvents:"none",children:"Delete"})]})]})})]},r.id))})]})})}),e(f,{flex:"1",children:a?n(f,{children:[e(ae,{src:"https://images.unsplash.com/photo-1554126807-6b10f6f6692a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80",alt:"image_user",mb:"2rem",h:"30rem",w:"full",objectFit:"contain"}),e(I,{mt:"2rem",children:e(_,{size:"sm",children:n(j,{children:[n(c,{children:[e(t,{children:"ID"}),e(t,{children:a._id})]}),n(c,{children:[e(t,{children:"UserName"}),e(t,{children:a.username})]}),n(c,{children:[e(t,{children:"Email"}),e(t,{children:a.email})]}),n(c,{children:[e(t,{children:"Phone"}),e(t,{children:a.phone})]}),n(c,{children:[e(t,{children:"Address"}),e(t,{children:a.address})]}),n(c,{children:[e(t,{children:"City"}),e(t,{children:a.city})]}),n(c,{children:[e(t,{children:"Province"}),e(t,{children:a.province})]}),n(c,{children:[e(t,{children:"Bio"}),e(t,{children:"Hi. minh la Tuan"})]})]})})})]}):e(O,{children:e(o,{children:L})})}),n(M,{isOpen:G,onClose:w,children:[e(B,{}),n(k,{children:[e(A,{children:"Update Admin"}),e(P,{}),e(F,{children:e(f,{children:n(de,{value:v.role,onChange:V,children:[e("option",{value:"user",children:"User"}),e("option",{value:"admin",children:"Admin"})]})})}),n(H,{children:[e(p,{colorScheme:"blue",mr:3,onClick:Y,children:"Accept"}),e(p,{colorScheme:"red",mr:3,onClick:w,children:"Close"})]})]})]}),n(M,{isOpen:J,onClose:C,isCentered:!0,children:[e(B,{}),n(k,{children:[e(A,{children:"Delete User"}),e(P,{}),e(F,{children:e(o,{children:"Bạn đã chắc chắn chứ ?"})}),n(H,{children:[e(p,{colorScheme:"blue",mr:3,onClick:ee,children:"Accept"}),e(p,{colorScheme:"red",mr:3,onClick:C,children:"Close"})]})]})]})]})]})}export{Ee as default};
